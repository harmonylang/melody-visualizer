(this["webpackJsonpmelody-visualizer"]=this["webpackJsonpmelody-visualizer"]||[]).push([[0],{183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(31),c=a.n(r),i=(a(183),a(66)),l=(a(184),a(45)),o=a(46),u=a(49),h=a(48),j=(a(185),a.p+"static/media/logo.da5a3132.svg"),b=a(7),d=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={displayStr:s.props.displayStr},s}return Object(o.a)(a,[{key:"render",value:function(){var e,t=["Strumming threads...","Simulating parallel universes...","Revising the halting problem...","Adding the 51st state...","Testing for the delta invariant..."];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:j,alt:"Harmony Logo",width:128,height:128,className:"harmony-icon"}),Object(b.jsx)("h2",{className:"harmony-icon-subtitle",children:null!==(e=this.state.displayStr)&&void 0!==e?e:t[Math.floor(Math.random()*t.length)]}),Object(b.jsxs)("svg",{className:"hero-waves",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28 ",preserveAspectRatio:"none",children:[Object(b.jsx)("defs",{children:Object(b.jsx)("path",{id:"wave-path",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})}),Object(b.jsx)("g",{className:"wave1",children:Object(b.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"2",fill:"rgba(255,255,255, .1)"})}),Object(b.jsx)("g",{className:"wave2",children:Object(b.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"0",fill:"rgba(255,255,255, .2)"})}),Object(b.jsx)("g",{className:"wave3",children:Object(b.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"8",fill:"#fff"})})]}),Object(b.jsx)("div",{className:"hero-bottom-bar"})]})}}]),a}(n.a.Component),p=a(367),f=a(383),m=a(142),v=a.n(m),O=a(128),x=(a(190),a(370)),g=a(365),y=a(369),k=a(65),S=a(140),w=a.n(S),V=(a(191),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={listRefs:s.props.code.reduce((function(e,t){return e.set(t.initialPc,n.a.createRef()),e}),new Map),highlightRef:n.a.createRef()},s}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.scrollToValue(e.pcValue),this.props.code!==e.code}},{key:"scrollToValue",value:function(e){var t;null===(t=this.state.listRefs.get(e))||void 0===t||t.current.scrollIntoView({behavior:"auto",block:"start"}),this.state.highlightRef.current.style.top=25*e+"px"}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(g.a,{size:"small",title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x.a,{})," Assembly"]}),className:"assembly-card",children:[Object(b.jsx)(y.b,{size:"small",className:"card-list",dataSource:this.props.code,renderItem:function(t){return Object(b.jsx)(b.Fragment,{children:t.assembly.map((function(a,s){var n=s+t.initialPc;return Object(b.jsx)(y.b.Item,{className:"assembly-list-item",children:Object(b.jsx)("div",{ref:e.state.listRefs.get(n),children:Object(b.jsxs)(k.a,{title:t.sourceCode,children:[Object(b.jsx)(w.a,{disabled:!0,children:n}),"\xa0",a.assembly,Object(b.jsxs)(w.a,{type:"warning",className:"assembly-list-text",children:[t.file.substring(t.file.lastIndexOf("/")+1).replace(".hny",""),":",t.line]})]})})},n)}))})}}),Object(b.jsx)("div",{ref:this.state.highlightRef,style:{position:"absolute",top:0,width:"100%",height:25,zIndex:8,backgroundColor:"#ffffff20"}})]})}}]),a}(n.a.Component)),C=a(109),N=a(371),T=a(372),D=a(373),I=a(374),F=a(52),z=a(92),R=a(73),B=a(368),E=(a(356),["#c62828","#AD1457","#6A1B9A","#4527A0","#283593","#1565C0","#0277BD","#00838F","#00695C","#2E7D32","#558B2F","#9E9D24","#F9A825","#FF8F00","#EF6C00","#D84315","#4E342E","#424242","#37474F"]),M=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s,r;Object(l.a)(this,a),(r=t.call(this,e)).interval=void 0,r.processBarsRef=void 0;var c=0,i=new Map,o=[],u=[];null===(s=e.blocks)||void 0===s||s.forEach((function(t){var a=t.tid,s=t.name,n=t.startSliceIdx,r=t.lastSliceIdx;i.has(a)||(o.push(s),i.set(a,{blocks:[]}));for(var l=i.get(a),u=n;u<r;u++){var h=e.slices[u];null===l||void 0===l||l.blocks.push({start:c,length:h.duration,color:""}),c+=h.duration}}));var h=0;return i.forEach((function(e){e.blocks.forEach((function(e){return e.color=E[h%E.length]})),u.push(e),h++})),r.processBarsRef=n.a.createRef(),r.onClickTimeline=r.onClickTimeline.bind(Object(C.a)(r)),r.state={playing:!1,totalDuration:c,processLabels:o,processBars:u},r}return Object(o.a)(a,[{key:"tick",value:function(){var e,t=this.props.stepValue;this.state.playing&&(t+1<this.state.totalDuration?(null===(e=this.processBarsRef.current)||void 0===e||e.scrollTo({top:0,left:5*(t+1),behavior:"auto"}),this.setStepValue(t+1)):this.setState({playing:!1}))}},{key:"stepForwards",value:function(){var e=this.props.stepValue;e<this.state.totalDuration&&this.setStepValue(e+1)}},{key:"stepBackwards",value:function(){var e=this.props.stepValue;e>0&&this.setStepValue(e-1)}},{key:"togglePlaying",value:function(){this.setState({playing:!this.state.playing})}},{key:"setStepValue",value:function(e){this.props.setStepValue(e)}},{key:"onClickTimeline",value:function(e){e.preventDefault();var t=e.currentTarget,a=t.getBoundingClientRect();this.setStepValue(Math.round((e.clientX-a.left+t.scrollLeft)/5))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),100)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(F.a,{className:"timeline-card",children:[Object(b.jsxs)(z.a,{className:"timeline-bar",children:[Object(b.jsx)(R.a,{shape:"circle",icon:Object(b.jsx)(N.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepBackwards()}}),Object(b.jsx)(R.a,{shape:"circle",icon:this.state.playing?Object(b.jsx)(T.a,{}):Object(b.jsx)(D.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.togglePlaying()}}),Object(b.jsx)(R.a,{shape:"circle",icon:Object(b.jsx)(I.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepForwards()}}),Object(b.jsx)(B.a,{onChange:function(t){return e.setStepValue(t)},value:this.props.stepValue,style:{flexGrow:1},max:this.state.totalDuration,className:"timeline-slider"})]}),Object(b.jsxs)(z.a,{className:"timeline-holder",children:[Object(b.jsx)(F.a,{span:6,children:Object(b.jsx)(y.b,{bordered:!1,dataSource:this.state.processLabels,renderItem:function(e){return Object(b.jsx)(y.b.Item,{className:"timeline-process-title",children:e})}})}),Object(b.jsxs)(F.a,{span:18,ref:this.processBarsRef,style:{overflowX:"scroll"},onMouseDown:this.onClickTimeline,children:[Object(b.jsx)(y.b,{bordered:!1,dataSource:this.state.processBars,style:{width:5*this.state.totalDuration},renderItem:function(e){return Object(b.jsx)(y.b.Item,{style:{position:"relative",padding:0,height:"3em"},children:e.blocks.map((function(e){return Object(b.jsx)("div",{style:{position:"absolute",left:5*e.start,width:5*e.length,height:"3em",backgroundColor:e.color}})}))})}}),Object(b.jsx)("div",{className:"timeline-indicator-bar",style:{left:5*this.props.stepValue}})]})]})]})}}]),a}(n.a.Component),P=a(375),A=a(90),L=a(366),J=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(l.a)(this,a);return(s=t.call(this,e)).state={sharedValues:function e(t){return Object.entries(t).map((function(t){var a=Object(i.a)(t,2),n=a[0],r=a[1];return null==r||"object"!==typeof r?{title:"".concat(n,": ").concat(s.formatVariableValue(r)),key:n,children:[]}:{title:n,key:n,children:e(r)}}))}(s.props.sharedVariables)},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){return Object(b.jsx)(g.a,{size:"small",title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P.a,{})," Variables"]}),className:"variables-card",children:Object(b.jsx)(L.a,{showIcon:!0,defaultExpandAll:!0,defaultSelectedKeys:["0-0-0"],switcherIcon:Object(b.jsx)(A.a,{}),treeData:this.state.sharedValues})})}}]),a}(n.a.Component),H=a(376),U=a(377),W=a(378),X=a(379),G=a(380),K=a(381),q=a(382),Q=a(364),Y=(a(357),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(l.a)(this,a),s=t.call(this,e);var n,r=function(e,t){var a=s.props.currentStackTrace.idToStackTrace[t].callStack[e];return a?Object.entries(a.vars).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return"".concat(a," = ").concat(s.formatVariableValue(n))})).join("\n"):""};return s.state={processTableData:(n=s.props.currentStackTrace.idToStackTrace,Object.keys(n).map((function(e,t){var a=n[e];return{process:{name:s.props.threadNames[e],status:a.fullStatus},stacktrace:a.callStack.map((function(e,t){return e.method})).join("\n"),variables:r(0,e)}})))},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){var e=[{title:"Process",dataIndex:"process",key:"process",render:function(e){return Object(b.jsxs)("span",{children:[Object(b.jsx)(k.a,{title:e.status,children:function(e){switch(e){case"running":case"running atomic":return Object(b.jsx)(H.a,{twoToneColor:"#7cb305"});case"runnable":case"runnable atomic":return Object(b.jsx)(U.a,{twoToneColor:"#7cb305"});case"failed":return Object(b.jsx)(W.a,{twoToneColor:"#a8071a"});case"blocked":case"blocked atomic":return Object(b.jsx)(X.a,{twoToneColor:"#a8071a"});case"terminated":return Object(b.jsx)(G.a,{twoToneColor:"#7cb305"});case"choosing":return Object(b.jsx)(K.a,{twoToneColor:"#d4b106"});default:return console.log(e),Object(b.jsx)(q.a,{})}}(e.status)}),"  ",e.name]})}},{title:"Stack Trace",dataIndex:"stacktrace",key:"stacktrace",render:function(e){return Object(b.jsx)("span",{children:e})}},{title:"Variables",dataIndex:"variables",key:"variables",render:function(e){return Object(b.jsx)("span",{children:e})}}];return Object(b.jsx)(Q.a,{className:"stacktrace-table",style:{whiteSpace:"pre"},columns:e,dataSource:this.state.processTableData,pagination:!1})}}]),a}(n.a.Component)),Z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(l.a)(this,a);var n=(s=t.call(this,e)).props.harmonyData.microSteps[0],r=s.props.harmonyData.slices[n.sliceIdx];return s.state={stepValue:0,currentPc:0,currentSlice:r},s}return Object(o.a)(a,[{key:"setStepValue",value:function(e){var t=this.props.harmonyData.microSteps[e];if(t){var a=this.props.harmonyData.slices[t.sliceIdx];this.setState({stepValue:e,currentPc:t.pc,currentSlice:a})}}},{key:"render",value:function(){var e=this;return Object(b.jsx)(v.a,{className:"fullscreen",children:Object(b.jsx)(m.Content,{className:"fullscreen",children:Object(b.jsxs)(O.a,{split:"horizontal",minSize:300,defaultSize:570,children:[Object(b.jsxs)(O.a,{split:"vertical",minSize:100,defaultSize:300,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(p.a,{className:"issue-header",title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.a,{}),"\xa0\xa0",this.props.harmonyData.issue]})}),Object(b.jsxs)(O.a,{split:"horizontal",minSize:200,defaultSize:300,children:[Object(b.jsx)(V,{code:this.props.harmonyData.executedCode,pcValue:this.state.currentPc}),Object(b.jsx)(J,{sharedVariables:this.state.currentSlice.sharedValues},JSON.stringify(this.state.currentSlice.sharedValues))]})]}),Object(b.jsx)(Y,{currentStackTrace:this.state.currentSlice,threadNames:this.props.harmonyData.idToThreadName},JSON.stringify(this.state.currentSlice))]}),Object(b.jsx)(M,{stepValue:this.state.stepValue,setStepValue:function(t){return e.setStepValue(t)},blocks:this.props.harmonyData.macroSteps,slices:this.props.harmonyData.slices})]})})})}}]),a}(n.a.Component);var $=function(){var e=Object(s.useState)(void 0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(void 0),l=Object(i.a)(c,2),o=l[0],u=l[1],h=Object(s.useState)(!1),j=Object(i.a)(h,2),p=j[0],f=j[1];return n.a.useEffect((function(){var e=function(e){var t=e.data,a=t.command,s=t.jsonData;switch(a){case"load":f(!0),setTimeout((function(){return f(!1)}),200),r(s);break;case"message":u(s)}};return window.addEventListener("message",e),parent.window.postMessage({command:"iframeReady",data:null},"*"),function(){return window.removeEventListener("message",e)}}),[]),Object(b.jsx)("div",{className:p?"main-fadeout":"main-fadein",children:a&&!p?Object(b.jsx)(Z,{harmonyData:a}):Object(b.jsx)(d,{displayStr:o},o)})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,384)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)($,{})}),document.getElementById("root")),_()}},[[359,1,2]]]);
//# sourceMappingURL=main.f6c6a577.chunk.js.map