(this["webpackJsonpmelody-visualizer"]=this["webpackJsonpmelody-visualizer"]||[]).push([[0],{191:function(e,t,a){},192:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(31),c=a.n(r),i=(a(191),a(88)),l=(a(192),a(51)),o=a(52),u=a(55),b=a(54),d=a(380),j=a(396),h=a(147),p=a.n(h),f=a(131),m=(a(196),a(383)),v=a(378),O=a(382),x=a(67),y=a(145),k=a.n(y),g=(a(197),a(8)),S=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={listRefs:s.props.code.reduce((function(e,t){return e.set(t.initialPc,n.a.createRef()),e}),new Map)},s}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.scrollToValue(e.pcValue),this.props.code!==e.code}},{key:"scrollToValue",value:function(e){var t;null===(t=this.state.listRefs.get(e))||void 0===t||t.current.scrollIntoView({behavior:"auto",block:"start"})}},{key:"render",value:function(){var e=this;return Object(g.jsx)(v.a,{size:"small",title:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m.a,{})," Assembly"]}),className:"assembly-card",children:Object(g.jsx)(O.b,{size:"small",className:"card-list",dataSource:this.props.code,renderItem:function(t){return Object(g.jsx)(g.Fragment,{children:t.assembly.map((function(a,s){var n=s+t.initialPc;return Object(g.jsx)(O.b.Item,{className:"assembly-list-item",children:Object(g.jsx)("div",{ref:e.state.listRefs.get(n),children:Object(g.jsxs)(x.a,{title:t.sourceCode,children:[Object(g.jsx)(k.a,{disabled:!0,children:n}),"\xa0",a.assembly,Object(g.jsxs)(k.a,{type:"warning",className:"assembly-list-text",children:[t.file.substring(t.file.lastIndexOf("/")+1).replace(".hny",""),":",t.line]})]})})},n)}))})}})})}}]),a}(n.a.Component),V=a(112),C=a(384),w=a(385),D=a(386),T=a(387),N=a(49),I=a(93),F=a(73),z=a(381),B=(a(369),["#c62828","#AD1457","#6A1B9A","#4527A0","#283593","#1565C0","#0277BD","#00838F","#00695C","#2E7D32","#558B2F","#9E9D24","#F9A825","#FF8F00","#EF6C00","#D84315","#4E342E","#424242","#37474F"]),E=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s,r;Object(l.a)(this,a),(r=t.call(this,e)).interval=void 0,r.processBarsRef=void 0;var c=0,i=new Map,o=[],u=[];null===(s=e.blocks)||void 0===s||s.forEach((function(t){var a=t.tid,s=t.name,n=t.startSliceIdx,r=t.lastSliceIdx;i.has(a)||(o.push(s),i.set(a,{blocks:[]}));for(var l=i.get(a),u=n;u<r;u++){var b=e.slices[u];null===l||void 0===l||l.blocks.push({start:c,length:b.duration,color:""}),c+=b.duration}}));var b=0;return i.forEach((function(e){e.blocks.forEach((function(e){return e.color=B[b%B.length]})),u.push(e),b++})),r.processBarsRef=n.a.createRef(),r.onClickTimeline=r.onClickTimeline.bind(Object(V.a)(r)),r.state={playing:!1,totalDuration:c,processLabels:o,processBars:u},r}return Object(o.a)(a,[{key:"tick",value:function(){var e,t=this.props.stepValue;this.state.playing&&(t+1<this.state.totalDuration?(null===(e=this.processBarsRef.current)||void 0===e||e.scrollTo({top:0,left:5*(t+1),behavior:"auto"}),this.setStepValue(t+1)):this.setState({playing:!1}))}},{key:"stepForwards",value:function(){var e=this.props.stepValue;e<this.state.totalDuration&&this.setStepValue(e+1)}},{key:"stepBackwards",value:function(){var e=this.props.stepValue;e>0&&this.setStepValue(e-1)}},{key:"togglePlaying",value:function(){this.setState({playing:!this.state.playing})}},{key:"setStepValue",value:function(e){this.props.setStepValue(e)}},{key:"onClickTimeline",value:function(e){e.preventDefault();var t=e.currentTarget,a=t.getBoundingClientRect();this.setStepValue(Math.round((e.clientX-a.left+t.scrollLeft)/5))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),100)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return Object(g.jsxs)(N.a,{className:"timeline-card",children:[Object(g.jsxs)(I.a,{className:"timeline-bar",children:[Object(g.jsx)(F.a,{shape:"circle",icon:Object(g.jsx)(C.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepBackwards()}}),Object(g.jsx)(F.a,{shape:"circle",icon:this.state.playing?Object(g.jsx)(w.a,{}):Object(g.jsx)(D.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.togglePlaying()}}),Object(g.jsx)(F.a,{shape:"circle",icon:Object(g.jsx)(T.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepForwards()}}),Object(g.jsx)(z.a,{onChange:function(t){return e.setStepValue(t)},value:this.props.stepValue,style:{flexGrow:1},max:this.state.totalDuration,className:"timeline-slider"})]}),Object(g.jsxs)(I.a,{className:"timeline-holder",children:[Object(g.jsx)(N.a,{span:6,children:Object(g.jsx)(O.b,{bordered:!1,dataSource:this.state.processLabels,renderItem:function(e){return Object(g.jsx)(O.b.Item,{className:"timeline-process-title",children:e})}})}),Object(g.jsxs)(N.a,{span:18,ref:this.processBarsRef,style:{overflowX:"scroll"},onMouseDown:this.onClickTimeline,children:[Object(g.jsx)(O.b,{bordered:!1,dataSource:this.state.processBars,style:{width:5*this.state.totalDuration},renderItem:function(e){return Object(g.jsx)(O.b.Item,{style:{position:"relative",padding:0,height:"3em"},children:e.blocks.map((function(e){return Object(g.jsx)("div",{style:{position:"absolute",left:5*e.start,width:5*e.length,height:"3em",backgroundColor:e.color}})}))})}}),Object(g.jsx)("div",{className:"timeline-indicator-bar",style:{left:5*this.props.stepValue}})]})]})]})}}]),a}(n.a.Component),R=a(388),P=a(91),A=a(379),L=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;Object(l.a)(this,a);return(s=t.call(this,e)).state={sharedValues:function e(t){return Object.entries(t).map((function(t){var a=Object(i.a)(t,2),n=a[0],r=a[1];return null==r||"object"!==typeof r?{title:"".concat(n,": ").concat(s.formatVariableValue(r)),key:n,children:[]}:{title:n,key:n,children:e(r)}}))}(s.props.sharedVariables)},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){return Object(g.jsx)(v.a,{size:"small",title:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(R.a,{})," Variables"]}),className:"variables-card",children:Object(g.jsx)(A.a,{showIcon:!0,defaultExpandAll:!0,defaultSelectedKeys:["0-0-0"],switcherIcon:Object(g.jsx)(P.a,{}),treeData:this.state.sharedValues})})}}]),a}(n.a.Component),M=a(389),J=a(390),U=a(391),W=a(392),X=a(393),G=a(394),K=a(395),q=a(377),H=(a(370),function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;Object(l.a)(this,a),s=t.call(this,e);var n,r=function(e,t){var a=s.props.currentStackTrace.idToStackTrace[t].callStack[e];return a?Object.entries(a.vars).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return"".concat(a," = ").concat(s.formatVariableValue(n))})).join("\n"):""};return s.state={processTableData:(n=s.props.currentStackTrace.idToStackTrace,Object.keys(n).map((function(e,t){var a=n[e];return{process:{name:s.props.threadNames[e],status:a.fullStatus},stacktrace:a.callStack.map((function(e,t){return e.method})).join("\n"),variables:r(0,e)}})))},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){var e=[{title:"Process",dataIndex:"process",key:"process",render:function(e){return Object(g.jsxs)("span",{children:[Object(g.jsx)(x.a,{title:e.status,children:function(e){switch(e){case"running":case"running atomic":return Object(g.jsx)(M.a,{twoToneColor:"#7cb305"});case"runnable":case"runnable atomic":return Object(g.jsx)(J.a,{twoToneColor:"#7cb305"});case"failed":return Object(g.jsx)(U.a,{twoToneColor:"#a8071a"});case"blocked":case"blocked atomic":return Object(g.jsx)(W.a,{twoToneColor:"#a8071a"});case"terminated":return Object(g.jsx)(X.a,{twoToneColor:"#7cb305"});case"choosing":return Object(g.jsx)(G.a,{twoToneColor:"#d4b106"});default:return console.log(e),Object(g.jsx)(K.a,{})}}(e.status)}),"  ",e.name]})}},{title:"Stack Trace",dataIndex:"stacktrace",key:"stacktrace",render:function(e){return Object(g.jsx)("span",{children:e})}},{title:"Variables",dataIndex:"variables",key:"variables",render:function(e){return Object(g.jsx)("span",{children:e})}}];return Object(g.jsx)(q.a,{className:"stacktrace-table",style:{whiteSpace:"pre"},columns:e,dataSource:this.state.processTableData,pagination:!1})}}]),a}(n.a.Component)),Q=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;Object(l.a)(this,a);var n=(s=t.call(this,e)).props.harmonyData.microSteps[0],r=s.props.harmonyData.slices[n.sliceIdx];return s.state={stepValue:0,currentPc:0,currentSlice:r},s}return Object(o.a)(a,[{key:"setStepValue",value:function(e){var t=this.props.harmonyData.microSteps[e];if(t){var a=this.props.harmonyData.slices[t.sliceIdx];this.setState({stepValue:e,currentPc:t.pc,currentSlice:a})}}},{key:"render",value:function(){var e=this;return Object(g.jsx)(p.a,{className:"fullscreen",children:Object(g.jsx)(h.Content,{className:"fullscreen",children:Object(g.jsxs)(f.a,{split:"horizontal",minSize:300,defaultSize:570,children:[Object(g.jsxs)(f.a,{split:"vertical",minSize:100,defaultSize:300,children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(d.a,{className:"issue-header",title:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.a,{}),"\xa0\xa0",this.props.harmonyData.issue]})}),Object(g.jsxs)(f.a,{split:"horizontal",minSize:200,defaultSize:300,children:[Object(g.jsx)(S,{code:this.props.harmonyData.executedCode,pcValue:this.state.currentPc}),Object(g.jsx)(L,{sharedVariables:this.state.currentSlice.sharedValues},JSON.stringify(this.state.currentSlice.sharedValues))]})]}),Object(g.jsx)(H,{currentStackTrace:this.state.currentSlice,threadNames:this.props.harmonyData.idToThreadName},JSON.stringify(this.state.currentSlice))]}),Object(g.jsx)(E,{stepValue:this.state.stepValue,setStepValue:function(t){return e.setStepValue(t)},blocks:this.props.harmonyData.macroSteps,slices:this.props.harmonyData.slices})]})})})}}]),a}(n.a.Component);var Y=function(){var e=Object(s.useState)(void 0),t=Object(i.a)(e,2),a=t[0],r=t[1];return n.a.useEffect((function(){var e=function(e){var t=e.data,a=t.command,s=t.jsonData;switch(a){case"load":console.log(s),r(s)}};return window.addEventListener("message",e),parent.window.postMessage({command:"iframeReady",data:null},"*"),function(){return window.removeEventListener("message",e)}}),[]),Object(g.jsx)(g.Fragment,{children:a&&Object(g.jsx)(Q,{harmonyData:a})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,397)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[372,1,2]]]);
//# sourceMappingURL=main.66972106.chunk.js.map