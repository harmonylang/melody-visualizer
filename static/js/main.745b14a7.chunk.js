(this["webpackJsonpmelody-visualizer"]=this["webpackJsonpmelody-visualizer"]||[]).push([[0],{182:function(e,t){},183:function(e,t){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},234:function(e,t){},240:function(e,t,a){},241:function(e,t,a){},404:function(e,t,a){},405:function(e,t,a){},408:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(32),c=a.n(r),i=(a(224),a(67)),l=(a(225),a(39)),o=a(46),u=a(41),h=a(40),j=(a(226),a(227),a(214)),d=a(7),b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(d.jsx)(j.a,{options:{zoom:!0,width:"100%",height:"100vh"},dot:this.props.harmonyGV.replace('rankdir = "LR"','rankdir = "LR"\n                bgcolor="black"\n                node[style=outline, color=white, fontcolor=white]\n                edge[color=white, fontcolor=white]\n            ')})}}]),a}(n.a.Component),p=b,f=a.p+"static/media/logo.da5a3132.svg",m=a(85),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={displayStr:s.props.displayStr,harmonyGV:s.props.harmonyGV,displayGraph:!1},s}return Object(o.a)(a,[{key:"render",value:function(){var e,t,a=this,s=["Strumming threads...","Simulating parallel universes...","Revising the halting problem...","Adding the 51st state...","Testing for the delta invariant..."];return Object(d.jsx)(d.Fragment,{children:this.state.displayGraph?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m.a,{className:"hide-graph-btn",onClick:function(){a.setState({displayGraph:!1})},children:"Back"}),Object(d.jsx)(p,{harmonyGV:null!==(e=this.state.harmonyGV)&&void 0!==e?e:""})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("img",{src:f,alt:"Harmony Logo",width:128,height:128,className:"harmony-icon"}),Object(d.jsx)("h2",{className:"harmony-icon-subtitle",children:null!==(t=this.state.displayStr)&&void 0!==t?t:s[Math.floor(Math.random()*s.length)]}),this.state.harmonyGV&&Object(d.jsx)(m.a,{className:"see-graph-btn",onClick:function(){a.setState({displayGraph:!0})},children:"See Graph"}),Object(d.jsxs)("svg",{className:"hero-waves",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28 ",preserveAspectRatio:"none",children:[Object(d.jsx)("defs",{children:Object(d.jsx)("path",{id:"wave-path",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})}),Object(d.jsx)("g",{className:"wave1",children:Object(d.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"2",fill:"rgba(255,255,255, .1)"})}),Object(d.jsx)("g",{className:"wave2",children:Object(d.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"0",fill:"rgba(255,255,255, .2)"})}),Object(d.jsx)("g",{className:"wave3",children:Object(d.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"8",fill:"#fff"})})]}),Object(d.jsx)("div",{className:"hero-bottom-bar"})]})})}}]),a}(n.a.Component),v=a(420),x=a(436),g=a(174),y=a.n(g),k=a(156),S=(a(240),a(423)),w=a(418),V=a(422),C=a(76),N=a(172),T=a.n(N),D=(a(241),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={listRefs:s.props.code.reduce((function(e,t){return e.set(t.initialPc,n.a.createRef()),e}),new Map),highlightRef:n.a.createRef()},s}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.scrollToValue(e.pcValue),this.props.code!==e.code}},{key:"scrollToValue",value:function(e){var t;null===(t=this.state.listRefs.get(e))||void 0===t||t.current.scrollIntoView({behavior:"auto",block:"start"}),this.state.highlightRef.current.style.top=25*e+"px"}},{key:"render",value:function(){var e=this;return Object(d.jsxs)(w.a,{size:"small",title:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(S.a,{})," Assembly"]}),className:"assembly-card",children:[Object(d.jsx)(V.b,{size:"small",className:"card-list",dataSource:this.props.code,renderItem:function(t){return Object(d.jsx)(d.Fragment,{children:t.assembly.map((function(a,s){var n=s+t.initialPc;return Object(d.jsx)(V.b.Item,{className:"assembly-list-item",children:Object(d.jsx)("div",{ref:e.state.listRefs.get(n),children:Object(d.jsxs)(C.a,{title:t.sourceCode,children:[Object(d.jsx)(T.a,{disabled:!0,children:n}),"\xa0",a.assembly,Object(d.jsxs)(T.a,{type:"warning",className:"assembly-list-text",children:[t.file.substring(t.file.lastIndexOf("/")+1).replace(".hny",""),":",t.line]})]})})},n)}))})}}),Object(d.jsx)("div",{ref:this.state.highlightRef,style:{position:"absolute",top:0,width:"100%",height:25,zIndex:8,backgroundColor:"#ffffff20"}})]})}}]),a}(n.a.Component)),I=a(137),F=a(424),z=a(425),R=a(426),B=a(427),E=a(57),G=a(111),L=a(421),M=(a(404),["#c62828","#AD1457","#6A1B9A","#4527A0","#283593","#1565C0","#0277BD","#00838F","#00695C","#2E7D32","#558B2F","#9E9D24","#F9A825","#FF8F00","#EF6C00","#D84315","#4E342E","#424242","#37474F"]),P=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s,r;Object(l.a)(this,a),(r=t.call(this,e)).interval=void 0,r.processBarsRef=void 0;var c=0,i=new Map,o=[],u=[];null===(s=e.blocks)||void 0===s||s.forEach((function(t){var a=t.tid,s=t.name,n=t.startSliceIdx,r=t.lastSliceIdx;i.has(a)||(o.push(s),i.set(a,{blocks:[]}));for(var l=i.get(a),u=n;u<r;u++){var h=e.slices[u];null===l||void 0===l||l.blocks.push({start:c,length:h.duration,color:""}),c+=h.duration}}));var h=0;return i.forEach((function(e){e.blocks.forEach((function(e){return e.color=M[h%M.length]})),u.push(e),h++})),r.processBarsRef=n.a.createRef(),r.onClickTimeline=r.onClickTimeline.bind(Object(I.a)(r)),r.state={playing:!1,totalDuration:c,processLabels:o,processBars:u},r}return Object(o.a)(a,[{key:"tick",value:function(){var e,t=this.props.stepValue;this.state.playing&&(t+1<this.state.totalDuration?(null===(e=this.processBarsRef.current)||void 0===e||e.scrollTo({top:0,left:5*(t+1),behavior:"auto"}),this.setStepValue(t+1)):this.setState({playing:!1}))}},{key:"stepForwards",value:function(){var e=this.props.stepValue;e<this.state.totalDuration&&this.setStepValue(e+1)}},{key:"stepBackwards",value:function(){var e=this.props.stepValue;e>0&&this.setStepValue(e-1)}},{key:"togglePlaying",value:function(){this.setState({playing:!this.state.playing})}},{key:"setStepValue",value:function(e){this.props.setStepValue(e)}},{key:"onClickTimeline",value:function(e){e.preventDefault();var t=e.currentTarget,a=t.getBoundingClientRect();this.setStepValue(Math.round((e.clientX-a.left+t.scrollLeft)/5))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),100)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)(E.a,{className:"timeline-card",children:[Object(d.jsxs)(G.a,{className:"timeline-bar",children:[Object(d.jsx)(m.a,{shape:"circle",icon:Object(d.jsx)(F.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepBackwards()}}),Object(d.jsx)(m.a,{shape:"circle",icon:this.state.playing?Object(d.jsx)(z.a,{}):Object(d.jsx)(R.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.togglePlaying()}}),Object(d.jsx)(m.a,{shape:"circle",icon:Object(d.jsx)(B.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepForwards()}}),Object(d.jsx)(L.a,{onChange:function(t){return e.setStepValue(t)},value:this.props.stepValue,style:{flexGrow:1},max:this.state.totalDuration,className:"timeline-slider"})]}),Object(d.jsxs)(G.a,{className:"timeline-holder",children:[Object(d.jsx)(E.a,{span:6,children:Object(d.jsx)(V.b,{bordered:!1,dataSource:this.state.processLabels,renderItem:function(e){return Object(d.jsx)(V.b.Item,{className:"timeline-process-title",children:e})}})}),Object(d.jsxs)(E.a,{span:18,ref:this.processBarsRef,style:{overflowX:"scroll"},onMouseDown:this.onClickTimeline,children:[Object(d.jsx)(V.b,{bordered:!1,dataSource:this.state.processBars,style:{width:5*this.state.totalDuration},renderItem:function(e){return Object(d.jsx)(V.b.Item,{style:{position:"relative",padding:0,height:"3em"},children:e.blocks.map((function(e){return Object(d.jsx)("div",{style:{position:"absolute",left:5*e.start,width:5*e.length,height:"3em",backgroundColor:e.color}})}))})}}),Object(d.jsx)("div",{className:"timeline-indicator-bar",style:{left:5*this.props.stepValue}})]})]})]})}}]),a}(n.a.Component),A=a(428),J=a(108),H=a(419),U=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(l.a)(this,a);return(s=t.call(this,e)).state={sharedValues:function e(t){return Object.entries(t).map((function(t){var a=Object(i.a)(t,2),n=a[0],r=a[1];return null==r||"object"!==typeof r?{title:"".concat(n,": ").concat(s.formatVariableValue(r)),key:n,children:[]}:{title:n,key:n,children:e(r)}}))}(s.props.sharedVariables)},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){return Object(d.jsx)(w.a,{size:"small",title:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(A.a,{})," Variables"]}),className:"variables-card",children:Object(d.jsx)(H.a,{showIcon:!0,defaultExpandAll:!0,defaultSelectedKeys:["0-0-0"],switcherIcon:Object(d.jsx)(J.a,{}),treeData:this.state.sharedValues})})}}]),a}(n.a.Component),W=a(429),X=a(430),K=a(431),q=a(432),Q=a(433),Y=a(434),Z=a(435),$=a(417),_=(a(405),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(l.a)(this,a),s=t.call(this,e);var n,r=function(e,t){var a=s.props.currentStackTrace.idToStackTrace[t].callStack[e];return a?Object.entries(a.vars).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return"".concat(a," = ").concat(s.formatVariableValue(n))})).join("\n"):""};return s.state={processTableData:(n=s.props.currentStackTrace.idToStackTrace,Object.keys(n).map((function(e,t){var a=n[e];return{process:{name:s.props.threadNames[e],status:a.fullStatus},stacktrace:a.callStack.map((function(e,t){return e.method})).join("\n"),variables:r(0,e)}})))},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){var e=[{title:"Process",dataIndex:"process",key:"process",render:function(e){return Object(d.jsxs)("span",{children:[Object(d.jsx)(C.a,{title:e.status,children:function(e){switch(e){case"running":case"running atomic":return Object(d.jsx)(W.a,{twoToneColor:"#7cb305"});case"runnable":case"runnable atomic":return Object(d.jsx)(X.a,{twoToneColor:"#7cb305"});case"failed":return Object(d.jsx)(K.a,{twoToneColor:"#a8071a"});case"blocked":case"blocked atomic":return Object(d.jsx)(q.a,{twoToneColor:"#a8071a"});case"terminated":return Object(d.jsx)(Q.a,{twoToneColor:"#7cb305"});case"choosing":return Object(d.jsx)(Y.a,{twoToneColor:"#d4b106"});default:return console.log(e),Object(d.jsx)(Z.a,{})}}(e.status)}),"  ",e.name]})}},{title:"Stack Trace",dataIndex:"stacktrace",key:"stacktrace",render:function(e){return Object(d.jsx)("span",{children:e})}},{title:"Variables",dataIndex:"variables",key:"variables",render:function(e){return Object(d.jsx)("span",{children:e})}}];return Object(d.jsx)($.a,{className:"stacktrace-table",style:{whiteSpace:"pre"},columns:e,dataSource:this.state.processTableData,pagination:!1})}}]),a}(n.a.Component)),ee=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(l.a)(this,a);var n=(s=t.call(this,e)).props.harmonyData.microSteps[0],r=s.props.harmonyData.slices[n.sliceIdx];return s.state={stepValue:0,currentPc:0,currentSlice:r},s}return Object(o.a)(a,[{key:"setStepValue",value:function(e){var t=this.props.harmonyData.microSteps[e];if(t){var a=this.props.harmonyData.slices[t.sliceIdx];this.setState({stepValue:e,currentPc:t.pc,currentSlice:a})}}},{key:"render",value:function(){var e=this;return Object(d.jsx)(y.a,{className:"fullscreen",children:Object(d.jsx)(g.Content,{className:"fullscreen",children:Object(d.jsxs)(k.a,{split:"horizontal",minSize:300,defaultSize:"70%",children:[Object(d.jsxs)(k.a,{split:"vertical",minSize:100,defaultSize:300,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)(v.a,{className:"issue-header",title:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{}),"\xa0\xa0",this.props.harmonyData.issue]})}),Object(d.jsxs)(k.a,{split:"horizontal",minSize:200,defaultSize:"60%",children:[Object(d.jsx)(D,{code:this.props.harmonyData.executedCode,pcValue:this.state.currentPc}),Object(d.jsx)(U,{sharedVariables:this.state.currentSlice.sharedValues},JSON.stringify(this.state.currentSlice.sharedValues))]})]}),Object(d.jsx)(_,{currentStackTrace:this.state.currentSlice,threadNames:this.props.harmonyData.idToThreadName},JSON.stringify(this.state.currentSlice))]}),Object(d.jsx)(P,{stepValue:this.state.stepValue,setStepValue:function(t){return e.setStepValue(t)},blocks:this.props.harmonyData.macroSteps,slices:this.props.harmonyData.slices})]})})})}}]),a}(n.a.Component);var te=function(){var e=Object(s.useState)(void 0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(void 0),l=Object(i.a)(c,2),o=l[0],u=l[1],h=Object(s.useState)(void 0),j=Object(i.a)(h,2),b=j[0],p=j[1],f=Object(s.useState)(!1),m=Object(i.a)(f,2),v=m[0],x=m[1];return n.a.useEffect((function(){var e=function(e){var t=e.data,a=t.command,s=t.jsonData;switch(a){case"load":x(!0),setTimeout((function(){return x(!1)}),200),r(s);break;case"load-graph":(s.match(/\n/g)||"").length+1>5&&u(s);break;case"message":p(s)}};return window.addEventListener("message",e),parent.window.postMessage({command:"iframeReady",data:null},"*"),function(){return window.removeEventListener("message",e)}}),[]),Object(d.jsx)("div",{className:v?"main-fadeout":"main-fadein",children:a&&!v?Object(d.jsx)(ee,{harmonyData:a}):Object(d.jsx)(O,{displayStr:b,harmonyGV:o},b)})},ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,437)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(te,{})}),document.getElementById("root")),ae()}},[[408,1,2]]]);
//# sourceMappingURL=main.745b14a7.chunk.js.map