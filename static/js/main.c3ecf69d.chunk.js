(this["webpackJsonpmelody-visualizer"]=this["webpackJsonpmelody-visualizer"]||[]).push([[0],{191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},373:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(31),c=a.n(r),i=(a(191),a(68)),l=(a(192),a(46)),o=a(47),u=a(50),j=a(49),b=(a(193),a.p+"static/media/logo.da5a3132.svg"),d=a(7),h=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={displayStr:s.props.displayStr},s}return Object(o.a)(a,[{key:"render",value:function(){var e,t=["Strumming threads...","Simulating parallel universes...","Revising the halting problem...","Adding the 51st state...","Testing for the delta invariant..."];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("img",{src:b,alt:"Harmony Logo",width:128,height:128,className:"harmony-icon"}),Object(d.jsx)("h2",{className:"harmony-icon-subtitle",children:null!==(e=this.state.displayStr)&&void 0!==e?e:t[Math.floor(Math.random()*t.length)]}),Object(d.jsxs)("svg",{className:"hero-waves",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28 ",preserveAspectRatio:"none",children:[Object(d.jsx)("defs",{children:Object(d.jsx)("path",{id:"wave-path",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})}),Object(d.jsx)("g",{className:"wave1",children:Object(d.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"2",fill:"rgba(255,255,255, .1)"})}),Object(d.jsx)("g",{className:"wave2",children:Object(d.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"0",fill:"rgba(255,255,255, .2)"})}),Object(d.jsx)("g",{className:"wave3",children:Object(d.jsx)("use",{xlinkHref:"#wave-path",x:"50",y:"8",fill:"#fff"})})]}),Object(d.jsx)("div",{className:"hero-bottom-bar"})]})}}]),a}(n.a.Component),p=a(381),m=a(397),f=a(147),v=a.n(f),O=a(131),x=(a(198),a(384)),y=a(379),g=a(383),k=a(67),S=a(145),w=a.n(S),V=(a(199),function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={listRefs:s.props.code.reduce((function(e,t){return e.set(t.initialPc,n.a.createRef()),e}),new Map)},s}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.scrollToValue(e.pcValue),this.props.code!==e.code}},{key:"scrollToValue",value:function(e){var t;null===(t=this.state.listRefs.get(e))||void 0===t||t.current.scrollIntoView({behavior:"auto",block:"start"})}},{key:"render",value:function(){var e=this;return Object(d.jsx)(y.a,{size:"small",title:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{})," Assembly"]}),className:"assembly-card",children:Object(d.jsx)(g.b,{size:"small",className:"card-list",dataSource:this.props.code,renderItem:function(t){return Object(d.jsx)(d.Fragment,{children:t.assembly.map((function(a,s){var n=s+t.initialPc;return Object(d.jsx)(g.b.Item,{className:"assembly-list-item",children:Object(d.jsx)("div",{ref:e.state.listRefs.get(n),children:Object(d.jsxs)(k.a,{title:t.sourceCode,children:[Object(d.jsx)(w.a,{disabled:!0,children:n}),"\xa0",a.assembly,Object(d.jsxs)(w.a,{type:"warning",className:"assembly-list-text",children:[t.file.substring(t.file.lastIndexOf("/")+1).replace(".hny",""),":",t.line]})]})})},n)}))})}})})}}]),a}(n.a.Component)),N=a(112),C=a(385),T=a(386),D=a(387),I=a(388),F=a(53),z=a(93),B=a(74),E=a(382),R=(a(370),["#c62828","#AD1457","#6A1B9A","#4527A0","#283593","#1565C0","#0277BD","#00838F","#00695C","#2E7D32","#558B2F","#9E9D24","#F9A825","#FF8F00","#EF6C00","#D84315","#4E342E","#424242","#37474F"]),M=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var s,r;Object(l.a)(this,a),(r=t.call(this,e)).interval=void 0,r.processBarsRef=void 0;var c=0,i=new Map,o=[],u=[];null===(s=e.blocks)||void 0===s||s.forEach((function(t){var a=t.tid,s=t.name,n=t.startSliceIdx,r=t.lastSliceIdx;i.has(a)||(o.push(s),i.set(a,{blocks:[]}));for(var l=i.get(a),u=n;u<r;u++){var j=e.slices[u];null===l||void 0===l||l.blocks.push({start:c,length:j.duration,color:""}),c+=j.duration}}));var j=0;return i.forEach((function(e){e.blocks.forEach((function(e){return e.color=R[j%R.length]})),u.push(e),j++})),r.processBarsRef=n.a.createRef(),r.onClickTimeline=r.onClickTimeline.bind(Object(N.a)(r)),r.state={playing:!1,totalDuration:c,processLabels:o,processBars:u},r}return Object(o.a)(a,[{key:"tick",value:function(){var e,t=this.props.stepValue;this.state.playing&&(t+1<this.state.totalDuration?(null===(e=this.processBarsRef.current)||void 0===e||e.scrollTo({top:0,left:5*(t+1),behavior:"auto"}),this.setStepValue(t+1)):this.setState({playing:!1}))}},{key:"stepForwards",value:function(){var e=this.props.stepValue;e<this.state.totalDuration&&this.setStepValue(e+1)}},{key:"stepBackwards",value:function(){var e=this.props.stepValue;e>0&&this.setStepValue(e-1)}},{key:"togglePlaying",value:function(){this.setState({playing:!this.state.playing})}},{key:"setStepValue",value:function(e){this.props.setStepValue(e)}},{key:"onClickTimeline",value:function(e){e.preventDefault();var t=e.currentTarget,a=t.getBoundingClientRect();this.setStepValue(Math.round((e.clientX-a.left+t.scrollLeft)/5))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),100)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)(F.a,{className:"timeline-card",children:[Object(d.jsxs)(z.a,{className:"timeline-bar",children:[Object(d.jsx)(B.a,{shape:"circle",icon:Object(d.jsx)(C.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepBackwards()}}),Object(d.jsx)(B.a,{shape:"circle",icon:this.state.playing?Object(d.jsx)(T.a,{}):Object(d.jsx)(D.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.togglePlaying()}}),Object(d.jsx)(B.a,{shape:"circle",icon:Object(d.jsx)(I.a,{}),size:"middle",className:"timeline-bar-btn",onClick:function(){return e.stepForwards()}}),Object(d.jsx)(E.a,{onChange:function(t){return e.setStepValue(t)},value:this.props.stepValue,style:{flexGrow:1},max:this.state.totalDuration,className:"timeline-slider"})]}),Object(d.jsxs)(z.a,{className:"timeline-holder",children:[Object(d.jsx)(F.a,{span:6,children:Object(d.jsx)(g.b,{bordered:!1,dataSource:this.state.processLabels,renderItem:function(e){return Object(d.jsx)(g.b.Item,{className:"timeline-process-title",children:e})}})}),Object(d.jsxs)(F.a,{span:18,ref:this.processBarsRef,style:{overflowX:"scroll"},onMouseDown:this.onClickTimeline,children:[Object(d.jsx)(g.b,{bordered:!1,dataSource:this.state.processBars,style:{width:5*this.state.totalDuration},renderItem:function(e){return Object(d.jsx)(g.b.Item,{style:{position:"relative",padding:0,height:"3em"},children:e.blocks.map((function(e){return Object(d.jsx)("div",{style:{position:"absolute",left:5*e.start,width:5*e.length,height:"3em",backgroundColor:e.color}})}))})}}),Object(d.jsx)("div",{className:"timeline-indicator-bar",style:{left:5*this.props.stepValue}})]})]})]})}}]),a}(n.a.Component),P=a(389),A=a(91),L=a(380),J=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var s;Object(l.a)(this,a);return(s=t.call(this,e)).state={sharedValues:function e(t){return Object.entries(t).map((function(t){var a=Object(i.a)(t,2),n=a[0],r=a[1];return null==r||"object"!==typeof r?{title:"".concat(n,": ").concat(s.formatVariableValue(r)),key:n,children:[]}:{title:n,key:n,children:e(r)}}))}(s.props.sharedVariables)},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){return Object(d.jsx)(y.a,{size:"small",title:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(P.a,{})," Variables"]}),className:"variables-card",children:Object(d.jsx)(L.a,{showIcon:!0,defaultExpandAll:!0,defaultSelectedKeys:["0-0-0"],switcherIcon:Object(d.jsx)(A.a,{}),treeData:this.state.sharedValues})})}}]),a}(n.a.Component),H=a(390),U=a(391),W=a(392),X=a(393),G=a(394),K=a(395),q=a(396),Q=a(378),Y=(a(371),function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var s;Object(l.a)(this,a),s=t.call(this,e);var n,r=function(e,t){var a=s.props.currentStackTrace.idToStackTrace[t].callStack[e];return a?Object.entries(a.vars).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return"".concat(a," = ").concat(s.formatVariableValue(n))})).join("\n"):""};return s.state={processTableData:(n=s.props.currentStackTrace.idToStackTrace,Object.keys(n).map((function(e,t){var a=n[e];return{process:{name:s.props.threadNames[e],status:a.fullStatus},stacktrace:a.callStack.map((function(e,t){return e.method})).join("\n"),variables:r(0,e)}})))},s}return Object(o.a)(a,[{key:"formatVariableValue",value:function(e){var t=typeof e;if("string"===t)return e.startsWith("?")?"".concat(e):'"'.concat(e,'"');if("boolean"===t||"number"===t){var a=e.toString();return a[0].toUpperCase()+a.substring(1)}return null==e?"None":JSON.stringify(e)}},{key:"render",value:function(){var e=[{title:"Process",dataIndex:"process",key:"process",render:function(e){return Object(d.jsxs)("span",{children:[Object(d.jsx)(k.a,{title:e.status,children:function(e){switch(e){case"running":case"running atomic":return Object(d.jsx)(H.a,{twoToneColor:"#7cb305"});case"runnable":case"runnable atomic":return Object(d.jsx)(U.a,{twoToneColor:"#7cb305"});case"failed":return Object(d.jsx)(W.a,{twoToneColor:"#a8071a"});case"blocked":case"blocked atomic":return Object(d.jsx)(X.a,{twoToneColor:"#a8071a"});case"terminated":return Object(d.jsx)(G.a,{twoToneColor:"#7cb305"});case"choosing":return Object(d.jsx)(K.a,{twoToneColor:"#d4b106"});default:return console.log(e),Object(d.jsx)(q.a,{})}}(e.status)}),"  ",e.name]})}},{title:"Stack Trace",dataIndex:"stacktrace",key:"stacktrace",render:function(e){return Object(d.jsx)("span",{children:e})}},{title:"Variables",dataIndex:"variables",key:"variables",render:function(e){return Object(d.jsx)("span",{children:e})}}];return Object(d.jsx)(Q.a,{className:"stacktrace-table",style:{whiteSpace:"pre"},columns:e,dataSource:this.state.processTableData,pagination:!1})}}]),a}(n.a.Component)),Z=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var s;Object(l.a)(this,a);var n=(s=t.call(this,e)).props.harmonyData.microSteps[0],r=s.props.harmonyData.slices[n.sliceIdx];return s.state={stepValue:0,currentPc:0,currentSlice:r},s}return Object(o.a)(a,[{key:"setStepValue",value:function(e){var t=this.props.harmonyData.microSteps[e];if(t){var a=this.props.harmonyData.slices[t.sliceIdx];this.setState({stepValue:e,currentPc:t.pc,currentSlice:a})}}},{key:"render",value:function(){var e=this;return Object(d.jsx)(v.a,{className:"fullscreen",children:Object(d.jsx)(f.Content,{className:"fullscreen",children:Object(d.jsxs)(O.a,{split:"horizontal",minSize:300,defaultSize:570,children:[Object(d.jsxs)(O.a,{split:"vertical",minSize:100,defaultSize:300,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)(p.a,{className:"issue-header",title:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m.a,{}),"\xa0\xa0",this.props.harmonyData.issue]})}),Object(d.jsxs)(O.a,{split:"horizontal",minSize:200,defaultSize:300,children:[Object(d.jsx)(V,{code:this.props.harmonyData.executedCode,pcValue:this.state.currentPc}),Object(d.jsx)(J,{sharedVariables:this.state.currentSlice.sharedValues},JSON.stringify(this.state.currentSlice.sharedValues))]})]}),Object(d.jsx)(Y,{currentStackTrace:this.state.currentSlice,threadNames:this.props.harmonyData.idToThreadName},JSON.stringify(this.state.currentSlice))]}),Object(d.jsx)(M,{stepValue:this.state.stepValue,setStepValue:function(t){return e.setStepValue(t)},blocks:this.props.harmonyData.macroSteps,slices:this.props.harmonyData.slices})]})})})}}]),a}(n.a.Component);var $=function(){var e=Object(s.useState)(void 0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(void 0),l=Object(i.a)(c,2),o=l[0],u=l[1],j=Object(s.useState)(!1),b=Object(i.a)(j,2),p=b[0],m=b[1];return n.a.useEffect((function(){var e=function(e){var t=e.data,a=t.command,s=t.jsonData;switch(a){case"load":m(!0),setTimeout((function(){return m(!1)}),200),r(s);break;case"message":u(s)}};return window.addEventListener("message",e),parent.window.postMessage({command:"iframeReady",data:null},"*"),function(){return window.removeEventListener("message",e)}}),[]),Object(d.jsx)("div",{className:p?"main-fadeout":"main-fadein",children:a&&!p?Object(d.jsx)(Z,{harmonyData:a}):Object(d.jsx)(h,{displayStr:o},o)})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,398)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)($,{})}),document.getElementById("root")),_()}},[[373,1,2]]]);
//# sourceMappingURL=main.c3ecf69d.chunk.js.map